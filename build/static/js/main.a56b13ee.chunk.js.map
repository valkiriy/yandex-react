{"version":3,"sources":["components/burger-constructor/burger-constructor.module.css","components/app-header/app-header.module.css","components/ingredient-details/ingredient-details.module.css","pages/login/login.module.css","services/utils.ts","services/api.ts","services/actions/auth.ts","services/user.tsx","components/app-header/app-header.tsx","utils/types.ts","components/burger-ingredients/ingredients-item.tsx","components/burger-ingredients/ingredients-list.tsx","components/burger-ingredients/burger-ingredients.tsx","services/constants/burger.ts","components/burger-constructor/constructor-item.tsx","components/burger-constructor/constructor-list.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","components/order-details/order-details.tsx","services/constants/order.ts","services/actions/order.ts","components/burger-constructor/burger-constructor.tsx","services/actions/burger.ts","pages/index/index.tsx","pages/forgot-password/forgot-password.tsx","components/ingredient-details/ingredient-details.tsx","pages/ingredients/ingredients.tsx","pages/login/login.tsx","components/protected-route.tsx","pages/profile/menu.tsx","pages/profile/profile.tsx","components/order-small/order-small.tsx","services/constants/ws.ts","services/actions/ws.ts","components/order-info/order-info.tsx","pages/profile/order.tsx","components/order-info/modal.tsx","pages/profile/orders.tsx","pages/profile/logout.tsx","pages/profile/index.tsx","pages/register/register.tsx","pages/reset-password/reset-password.tsx","pages/feed/feed.tsx","pages/feed/order.tsx","pages/feed/index.tsx","services/constants/ingridients.ts","services/actions/ingridients.ts","components/ingredient-details/modal.tsx","components/app/app.tsx","reportWebVitals.ts","services/reducers/burger.ts","services/reducers/ingredients.ts","services/reducers/order.ts","services/constants/view-ingridient.ts","services/reducers/view-ingredient.ts","services/reducers/ws.ts","services/reducers/index.ts","services/store.ts","services/socketMiddleware.ts","index.js","components/burger-ingredients/burger-ingredients.module.css","pages/feed/feed.module.css","components/order-small/order-small.module.css","components/order-details/order-detail.module.css","pages/register/register.module.css","components/order-info/order-info.module.css","pages/forgot-password/forgot-password.module.css","components/modal/modal.module.css","pages/index/index.module.css","pages/profile/profile.module.css","components/modal-overlay/modal-overlay.module.css","pages/ingredients/ingredients.module.css"],"names":["module","exports","request","url","options","fetch","then","checkResponse","res","ok","json","Promise","reject","status","getCookie","name","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","value","props","exp","expires","d","Date","setTime","getTime","toUTCString","encodeURIComponent","updatedCookie","propName","propValue","deleteCookie","API_URL","loginUser","form","email","password","method","headers","body","JSON","stringify","success","resolve","catch","err","console","log","registerUser","logoutUser","token","infoUser","Authorization","saveInfoUser","requestSaveUser","updateTokenUser","UserContext","createContext","ProvideUser","children","user","useState","setUser","register","data","accessToken","split","refreshToken","login","logout","loadUserInfo","e","updateToken","saveUserInfo","useProvideUser","Provider","useUser","useContext","AppHeader","className","styles","header","menu","menuLeft","menuItem","to","pathname","exact","link","activeClassName","active","type","menuRight","TypeIngredient","OrderStatus","useDispatch","dispatchHook","useSelector","selectorHook","IngredientsItem","item","location","useLocation","state","burger","bun","ingredients","count","filter","x","ingredient","_id","length","useDrag","dragRef","ref","background","size","item_image","src","image","alt","item_price","price","item_name","IngredientsList","list","items","map","index","BurgerIngredients","React","current","setCurrent","listBunRef","useRef","listSauceRef","listMainRef","scrollHandler","getBoundingClientRect","y","useEffect","window","addEventListener","removeEventListener","content","tab","onClick","list_wrap","BUN","SAUCE","MAIN","SET_BUN","ADD_INGREDIENT","REMOVE_INGREDIENT","SET_INGREDIENT_INDEX","ConstructorItem","pos","dispatch","useDrop","accept","hover","monitor","isOver","dragIndex","hoverIndex","hoverBoundingRect","hoverMiddleY","bottom","top","clientOffset","getClientOffset","hoverClientY","drop","collect","isDragging","drag","opacity","style","isLocked","text","thumbnail","handleClose","ConstructorList","empty_ingredient_wrap","empty_ingredient_top","list_ingredients","empty_ingredient_list","uuid","empty_ingredient_bottom","ModalOverlay","onClose","modal_overlay","modalRoot","getElementById","Modal","closeByEscape","evt","key","ReactDOM","createPortal","modal","onKeyDown","tabIndex","close","OrderDetails","info","order","order_num","number","order_num_description","order_status_icon","order_status","order_status_description","SEND_ORDER_REQUEST","SEND_ORDER_SUCCESS","SEND_ORDER_FAILED","SHOW_MODAL_INFO_ORDER","HIDE_MODAL_INFO_ORDER","sendOrder","requestMakeOrder","BurgerConstructor","history","useHistory","show_info","c","crypto","getRandomValues","Uint8Array","toString","AddIngredientBurger","dropTarget","summary","reduce","amount","htmlType","preventDefault","r","sendOrderHandler","Index","main","container","DndProvider","backend","HTML5Backend","ForgotPassword","setValue","useCallback","code_send","alert","onSubmit","title","field","onChange","target","placeholder","IngredientDetails","image_large","grid","grid_item","grid_item_value","calories","proteins","fat","carbohydrates","Ingredients","id","useParams","find","center","Login","f","ProtectedRoute","rest","isUserLoaded","setUserLoaded","finally","render","ProfileMenu","Profile","isChangeForm","setIsChangeForm","OrderSmall","showStatus","created_at","createdAt","accumulator","currentValue","right","toLocaleString","CREATED","PENDING","DONE","list_ingr","slice","img_preview","backgroundImage","info_price","WS_CONNECTION_START","WS_CONNECTION_STOP","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_GET_MESSAGE","WS_CONNECTION_CLOSED","WsConnectionStart","WsConnectionStop","OrderInfo","list_items","item_info","footer","ProfileOrder","listOrders","info_order","ModalOrderInfo","ws","goBack","ProfileOrders","background_my","path","link_clear","ProfileLogout","ProfileIndex","Register","ResetPassword","code","hasOwnProperty","Feed","cntAll","cntToday","background_feed","grid_stats","Order","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","getIngredients","ModalIngredient","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","failed","SHOW_MODAL","HIDE_MODAL","SET_INGREDIENT","showModal","wsConnected","rootReducer","combineReducers","action","ingrs","push","newIngrs","splice","_","viewIngredient","error","event","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","socket","next","WebSocket","onopen","WsConnectionSuccess","onerror","WsConnectionError","onmessage","par","parse","WsGetMessage","orders","totalToday","total","onclose","WsConnectionClose","createStore","StrictMode"],"mappings":"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","file":"static/js/main.a56b13ee.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"burger-constructor_list__2lXaw\",\"list_ingredients\":\"burger-constructor_list_ingredients__2vJVZ\",\"empty_ingredient_wrap\":\"burger-constructor_empty_ingredient_wrap__3UGyi\",\"empty_ingredient\":\"burger-constructor_empty_ingredient__1p6F8\",\"empty_ingredient_list\":\"burger-constructor_empty_ingredient_list__2ozYA\",\"empty_ingredient_top\":\"burger-constructor_empty_ingredient_top__16IoL burger-constructor_empty_ingredient__1p6F8\",\"empty_ingredient_bottom\":\"burger-constructor_empty_ingredient_bottom__3H3mf burger-constructor_empty_ingredient__1p6F8\",\"item\":\"burger-constructor_item__9YfeG\",\"content\":\"burger-constructor_content__3FA1X mt-25\",\"summary\":\"burger-constructor_summary__1USSk mt-10\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__1iHLW p-4\",\"menu\":\"app-header_menu__3SLom\",\"menuLeft\":\"app-header_menuLeft__3ZJFn\",\"menuItem\":\"app-header_menuItem__29m4R\",\"menuRight\":\"app-header_menuRight__2zKF9\",\"link\":\"app-header_link__2y8TU text text_type_main-default p-5\",\"active\":\"app-header_active__1gFZ7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"ingredient-details_content__WdJuD pt-10 pr-10 pl-10 pb-15\",\"header\":\"ingredient-details_header__2JP_g text text_type_main-large\",\"name\":\"ingredient-details_name__3OKTo text text_type_main-medium pt-4\",\"image\":\"ingredient-details_image__H2-xP\",\"grid\":\"ingredient-details_grid__s1g1X pt-8 text text_type_main-default\",\"grid_item\":\"ingredient-details_grid_item__1oL-R\",\"grid_item_value\":\"ingredient-details_grid_item_value__2I5cr text_type_digits-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"login_content__28Q5n\",\"title\":\"login_title__PmNb0 text text_type_main-medium\",\"field\":\"login_field__3XxLq\",\"link\":\"login_link__2bcVJ\"};","export function uuidv4() {\n    //@ts-ignore\n    return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\n        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n    );\n}\n\nexport function request(url: string, options: RequestInit){\n    return fetch(url, options).then(checkResponse)\n}\n\nexport function checkResponse(res: Response){\n    if(res.ok){\n        return res.json();\n    }\n    return Promise.reject(`Error: ${res.status}`)\n}\n\nexport function getCookie(name: string) {\n    const matches = document.cookie.match(\n        new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)')\n    );\n    return matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\nexport function setCookie(name: string, value: string | null, props: { [key: string]: any } = {}) {\n    props = props || {};\n    let exp = props.expires;\n    if (typeof exp == 'number' && exp) {\n        const d = new Date();\n        d.setTime(d.getTime() + exp * 1000);\n        exp = props.expires = d;\n    }\n    if (exp) {\n        if (\"toUTCString\" in exp) {\n            props.expires = exp.toUTCString();\n        }\n    }\n    if(value){\n        value = encodeURIComponent(value);\n    }\n    let updatedCookie = name + '=' + value;\n    for (const propName in props) {\n        updatedCookie += '; ' + propName;\n        const propValue = props[propName];\n        if (propValue !== true) {\n            updatedCookie += '=' + propValue;\n        }\n    }\n    document.cookie = updatedCookie;\n}\n\nexport function deleteCookie(name: string) {\n    setCookie(name, null, { expires: -1 });\n}","import {getCookie, request} from \"./utils\";\nimport {TUserSave} from \"../utils/types\";\n\nconst API_URL = \"https://norma.nomoreparties.space/api\"\n\nexport function requestGetIngredients() {\n    return request(`${API_URL}/ingredients`, {method: 'GET'})\n}\n\nexport function requestMakeOrder(ingredients: string[]) {\n    return request(`${API_URL}/orders`, {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: 'Bearer ' + getCookie('access_token')\n        },\n        body: JSON.stringify({ingredients: ingredients})\n    })\n}\n\nexport function requestResetPassword(email: string){\n    return request(`${API_URL}/password-reset`, {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({email})\n    })\n}\n\nexport function requestSavePassword(password: string, token: string){\n    return request(`${API_URL}/password-reset/reset`, {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({password, token})\n    })\n}\n\nexport function requestRegister(email: string, password: string, name: string){\n    return request(`${API_URL}/auth/register`, {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({email, password, name})\n    })\n}\n\nexport function requestLogin(email: string, password: string){\n    return request(`${API_URL}/auth/login`, {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({email, password})\n    })\n}\n\nexport function requestUser(){\n    return request(`${API_URL}/auth/user`, {\n        method: 'GET',\n        headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: 'Bearer ' + getCookie('access_token')\n        },\n    })\n}\n\nexport function requestSaveUser(form: TUserSave){\n    return request(`${API_URL}/auth/user`, {\n        method: 'PATCH',\n        headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: 'Bearer ' + getCookie('access_token')\n        },\n        body: JSON.stringify(form)\n    })\n}\n\nexport function requestToken(){\n    return request(`${API_URL}/auth/token`, {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({token: getCookie('refresh_token')})\n    })\n}\n\n\nexport function requestLogout(){\n    return request(`${API_URL}/auth/logout`, {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({token: getCookie('refresh_token')})\n    })\n}\n","import {requestLogin, requestLogout, requestRegister, requestSaveUser, requestToken, requestUser} from \"../api\";\nimport {TBackendUser, TFormLogin, TFormRegister, TUserSave} from \"../../utils/types\";\n\nexport const loginUser = (form: TFormLogin): Promise<TBackendUser> =>{\n    return requestLogin(form.email, form.password).then((res) => {\n        if (res && res.success) {\n            return Promise.resolve(res);\n        } else {\n            return Promise.reject();\n        }\n    }).catch((err) => {\n        console.log(err)\n    })\n}\n\nexport const registerUser = (form: TFormRegister): Promise<TBackendUser> => {\n    return requestRegister(form.email, form.password, form.name).then((res) => {\n        if (res && res.success) {\n            return Promise.resolve(res);\n        } else {\n            return Promise.reject();\n        }\n    }).catch((err) => {\n        console.log(err)\n    })\n}\n\nexport const logoutUser = (): Promise<unknown> => {\n    return requestLogout().then((res) => {\n        if (res && res.success) {\n            return Promise.resolve();\n        } else {\n            return Promise.reject();\n        }\n    }).catch((err) => {\n        console.log(err)\n    })\n}\n\nexport const infoUser = (): Promise<TBackendUser> => {\n    return requestUser().then((res) => {\n        if (res && res.success) {\n            return Promise.resolve(res);\n        } else {\n            return Promise.reject(res);\n        }\n    }).catch((err) => {\n        console.log(err)\n    })\n}\n\nexport const saveInfoUser = (form: TUserSave): Promise<TBackendUser> => {\n    return requestSaveUser(form).then((res) => {\n        if (res && res.success) {\n            return Promise.resolve(res);\n        } else {\n            return Promise.reject();\n        }\n    }).catch((err) => {\n        console.log(err)\n    })\n}\n\nexport const updateTokenUser = (): Promise<TBackendUser> => {\n    return requestToken().then((res) => {\n        if (res && res.success) {\n            return Promise.resolve(res);\n        } else {\n            return Promise.reject();\n        }\n    }).catch((err) => {\n        console.log(err)\n    })\n}","import React, {useContext, createContext, useState, FC} from 'react';\nimport {deleteCookie, getCookie, setCookie} from \"./utils\";\nimport {infoUser, loginUser, logoutUser, registerUser, saveInfoUser, updateTokenUser} from \"./actions/auth\";\nimport {TFormLogin, TFormRegister, TProviderUser, TUser, TUserSave} from \"../utils/types\";\n\n// создаем контекст авторизации, значения по умолчанию вычислить изначально не возможно = undefined\nconst UserContext = createContext<TProviderUser | null>(null);\n\n// враппер, провайдер авторизации, используем хук в качестве значения, которое пробросим во всех потомков\nexport const ProvideUser: FC = ({ children }) => {\n    const user = useProvideUser();\n    return (\n        <UserContext.Provider value={user}>\n            {children}\n        </UserContext.Provider>\n    )\n}\n\n// хук авторизации, из хука реакта. который вохвращает переданные значения в контекст\nexport const useUser: () => TProviderUser | null = () => {\n    return useContext(UserContext);\n}\n\nexport function useProvideUser(): TProviderUser {\n    const [user, setUser] = useState<TUser | null>(null);\n\n    const register = (form: TFormRegister) => {\n        return registerUser(form).then((data) => {\n            setCookie('access_token', data.accessToken ? data.accessToken.split(\"Bearer \")[1] : null);\n            setCookie('refresh_token', data.refreshToken || null);\n            setUser({ ...data.user});\n        })\n    }\n\n    const login = (form: TFormLogin) => {\n        return loginUser(form).then((data) => {\n            setCookie('access_token', data.accessToken ? data.accessToken.split(\"Bearer \")[1] : null);\n            setCookie('refresh_token', data.refreshToken || null);\n            setUser({ ...data.user});\n        })\n    }\n\n    const logout = () => {\n        return logoutUser().then(() => {\n            deleteCookie('access_token');\n            deleteCookie('refresh_token');\n            setUser(null);\n        })\n    }\n\n    const loadUserInfo = () => {\n        if(getCookie('access_token')){\n            return infoUser().then(data => {\n                setUser({ ...data.user});\n            }).catch(e => {\n                return updateToken()\n            })\n        }\n        return Promise.reject();\n    }\n\n    const saveUserInfo = (form: TUserSave) => {\n        return saveInfoUser(form).then(data => {\n            setUser({ ...data.user});\n        })\n    }\n\n    const updateToken = () => {\n        return updateTokenUser().then(data => {\n            setCookie('access_token', data.accessToken ? data.accessToken.split(\"Bearer \")[1] : null);\n            setCookie('refresh_token', data.refreshToken || null);\n        }).catch(() => {\n            logout()\n        })\n    }\n\n    // если юзер не определен, то делаем запрос на сервер для получения данных\n    // то есть чтобы при перезагрузке страницы сразу подтягивался юзер\n    if(!user){\n        loadUserInfo().catch(() => {})\n    }\n\n    return {\n        register,\n        login,\n        logout,\n        loadUserInfo,\n        saveUserInfo,\n        updateToken,\n        user,\n    }\n}","import React from \"react\";\nimport styles from './app-header.module.css'\n\nimport {NavLink} from \"react-router-dom\"\n\nimport {Logo, BurgerIcon, ListIcon, ProfileIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nexport function AppHeader(){\n    return (\n        <header className={styles.header}>\n            <menu className={styles.menu}>\n                <div className={`${styles.menuLeft} ${styles.menuItem}`}>\n                    <NavLink to={{pathname: `/` }} exact className={styles.link} activeClassName={styles.active}>\n                        <BurgerIcon type=\"primary\" />\n                        <span className=\"pl-2\">Конструктор</span>\n                    </NavLink>\n                    <NavLink to={{pathname: `/feed`}} className={styles.link} activeClassName={styles.active}>\n                        <ListIcon type=\"primary\" />\n                        <span className=\"pl-2\">Лента заказов</span>\n                    </NavLink>\n                </div>\n                <NavLink to={{pathname: `/`}} className={`${styles.menuItem}`}><Logo /></NavLink>\n                <div className={`${styles.menuRight} ${styles.menuItem}`}>\n                    <NavLink data-class={\"go-to-login\"} to={{pathname: `/profile`}} className={styles.link} activeClassName={styles.active}>\n                        <ProfileIcon type=\"primary\" />\n                        <span className=\"pl-2\">Личный кабинет</span>\n                    </NavLink>\n                </div>\n            </menu>\n        </header>\n    )\n}\n\n","import {TLoadIngredientsActions} from \"../services/actions/ingridients\"\nimport {store} from \"../services/store\";\nimport {ThunkAction, ThunkDispatch} from \"redux-thunk\";\nimport {ActionCreator} from \"redux\";\nimport {TOrderActions} from \"../services/actions/order\";\nimport {TWSActions} from \"../services/actions/ws\";\nimport {TBurgerActions} from \"../services/actions/burger\";\n\nimport {\n    TypedUseSelectorHook,\n    useDispatch as dispatchHook,\n    useSelector as selectorHook,\n} from \"react-redux\";\n\nexport enum TypeIngredient {\n    BUN = 'bun',\n    MAIN = 'main',\n    SAUCE = 'sauce',\n}\n\nexport enum OrderStatus {\n    CREATED = \"created\",\n    PENDING = \"pending\",\n    DONE = \"done\",\n}\n\nexport type TIngredient = {\n    _id: string,\n    uuid?: string,\n    name: string,\n    type: TypeIngredient,\n    proteins?: number,\n    fat?: number,\n    carbohydrates?: number,\n    calories?: number,\n    price: number,\n    image: string,\n    image_large: string,\n    image_mobile?: string\n}\n\nexport type TFormRegister = {\n    email: string,\n    password: string,\n    name: string,\n}\n\nexport type TFormLogin = {\n    email: string,\n    password: string,\n}\n\nexport type TUser = {\n    [key: string]: string\n}\n\nexport type TUserSave = {\n    email: string,\n    password: string,\n    name: string\n}\n\nexport type TProviderUser = {\n    register: (form: TFormRegister) => Promise<any>,\n    login: (form: TFormLogin) => Promise<void>,\n    logout: () => Promise<any>,\n    loadUserInfo: () => Promise<any>,\n    saveUserInfo: (form: TUserSave) => Promise<any>,\n    updateToken: () => void,\n    user: TUser | null\n}\n\nexport type TBackendUser = {\n    user: TUser;\n    refreshToken?: string;\n    accessToken?: string;\n}\n\nexport type TOrder = {\n    _id: string;\n    ingredients: string[];\n    status: 'created' | 'pending' | 'done';\n    name: string;\n    createdAt: string;\n    updateAt: string;\n    number: number;\n}\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type TApplicationActions = TLoadIngredientsActions | TOrderActions | TWSActions | TBurgerActions;\n\nexport type AppThunk<ReturnType = void> = ActionCreator<\n    ThunkAction<ReturnType, RootState, never, TApplicationActions>\n>;\n\n// export type AppDispatch = typeof store.dispatch;\nexport type AppDispatch = ThunkDispatch<RootState, never, TApplicationActions>;\n\nexport const useDispatch = () => dispatchHook<AppDispatch>()\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook","import React from \"react\";\nimport styles from './burger-ingredients.module.css'\n\nimport {Counter, CurrencyIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {TIngredient, useSelector} from \"../../utils/types\";\nimport {useDrag} from \"react-dnd\";\nimport {Link, useLocation} from \"react-router-dom\";\n\ninterface IIngredientsItem {\n    item: TIngredient\n}\n\nexport function IngredientsItem({item} : IIngredientsItem){\n\n    let location = useLocation();\n    const {bun, ingredients} = useSelector(\n        (state) => state.burger\n    )\n\n    const count = [bun, bun, ...ingredients]\n        .filter(x => x)\n        .filter(ingredient => ingredient && ingredient._id === item._id).length\n\n    const [, dragRef] = useDrag({\n        type: \"ingredient\",\n        item: item\n    })\n\n    return (\n        <div className={styles.item}\n             ref={dragRef}>\n            <Link\n                to={{\n                    pathname: `/ingredients/${item._id}`,\n                    state: {\n                        background: location,\n                    }\n                }}\n                data-class={`ingredient-${item._id}`}\n                className={styles.link}\n            >\n                {count > 0 && (<Counter count={count} size=\"default\" />) }\n                <div>\n                    <img className={styles.item_image} src={item.image} alt={item.name}/>\n                    <div className={styles.item_price}><span>{item.price}</span> <CurrencyIcon type=\"primary\" /></div>\n                </div>\n                <p className={styles.item_name}>{item.name}</p>\n            </Link>\n        </div>\n    )\n}\n","import React from \"react\";\nimport {IngredientsItem} from \"./ingredients-item\";\nimport styles from './burger-ingredients.module.css'\nimport {TIngredient} from '../../utils/types'\n\ninterface IIngredientsList{\n    items: TIngredient[]\n}\n\nexport function IngredientsList({ items }: IIngredientsList){\n    const list = items.map((item, index) => (<IngredientsItem key={item._id} item={item} />))\n    return (\n        <>\n            <div className={styles.list}>\n                {list}\n            </div>\n        </>\n    )\n}\n","import React, {useEffect, useRef} from \"react\";\n\nimport {IngredientsList} from \"./ingredients-list\";\nimport styles from './burger-ingredients.module.css'\nimport {Tab} from \"@ya.praktikum/react-developer-burger-ui-components\"\nimport {TIngredient, TypeIngredient, useSelector} from \"../../utils/types\";\n\nexport function BurgerIngredients(){\n    const {items: ingredients} = useSelector(\n        (state) => state.ingredients\n    )\n\n    const [current, setCurrent] = React.useState('bun')\n    const listBunRef = useRef<HTMLInputElement>(null);\n    const listSauceRef = useRef<HTMLInputElement>(null);\n    const listMainRef = useRef<HTMLInputElement>(null);\n\n    const scrollHandler = () => {\n        if(listBunRef.current && listBunRef.current.getBoundingClientRect().y > 0){\n            setCurrent('bun')\n        }else if(listSauceRef.current && listSauceRef.current.getBoundingClientRect().y > 0){\n            setCurrent('sauce')\n        }else{\n            setCurrent('main')\n        }\n    };\n\n    useEffect(() => {\n        window.addEventListener(\"scroll\", scrollHandler, true);\n        return () => {\n            window.removeEventListener(\"scroll\", scrollHandler, true);\n        };\n    }, []);\n\n    return (\n        <div className={styles.content}>\n            <h1 className={\"pt-10 pb-5 text text_type_main-large\"}>Соберите бургер</h1>\n            <div className={styles.tab}>\n                <Tab value=\"bun\" active={current === 'bun'} onClick={setCurrent}>\n                    Булки\n                </Tab>\n                <Tab value=\"sauce\" active={current === 'sauce'} onClick={setCurrent}>\n                    Соусы\n                </Tab>\n                <Tab value=\"main\" active={current === 'main'} onClick={setCurrent}>\n                    Начинки\n                </Tab>\n            </div>\n\n            <div className={styles.list_wrap}>\n                <div>\n                    <p className=\"text text_type_main-medium pb-6\" ref={listBunRef}>\n                        Булки\n                    </p>\n                    <IngredientsList items={ingredients.filter((x: TIngredient) => x.type === TypeIngredient.BUN)} />\n                </div>\n                <div>\n                    <p className=\"text text_type_main-medium  pt-10 pb-6\" ref={listSauceRef}>\n                        Соусы\n                    </p>\n                    <IngredientsList items={ingredients.filter((x: TIngredient) => x.type === TypeIngredient.SAUCE)} />\n                </div>\n                <div>\n                    <p className=\"text text_type_main-medium  pt-10 pb-6\" ref={listMainRef}>\n                        Начинки\n                    </p>\n                    <IngredientsList items={ingredients.filter((x: TIngredient) => x.type === TypeIngredient.MAIN)} />\n                </div>\n            </div>\n\n        </div>\n    )\n}\n","\nexport const SET_BUN: \"SET_BUN\" = \"SET_BUN\";\nexport const ADD_INGREDIENT: \"ADD_INGREDIENT\" = \"ADD_INGREDIENT\";\nexport const REMOVE_INGREDIENT: \"REMOVE_INGREDIENT\" = \"REMOVE_INGREDIENT\";\nexport const SET_INGREDIENT_INDEX: \"SET_INGREDIENT_INDEX\" = \"SET_INGREDIENT_INDEX\";","import React, {useRef} from \"react\";\n\nimport styles from './burger-constructor.module.css'\n\nimport {ConstructorElement, DragIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {TIngredient, TypeIngredient, useDispatch} from \"../../utils/types\";\nimport {REMOVE_INGREDIENT, SET_INGREDIENT_INDEX} from \"../../services/constants/burger\";\nimport {useDrag, useDrop, XYCoord} from \"react-dnd\";\n\ninterface IConstructorItem {\n    item: TIngredient,\n    pos: 'top' | 'bottom'| undefined,\n    index: number\n}\n\nexport function ConstructorItem({pos = undefined, item, index}: IConstructorItem){\n\n    const ref = useRef<HTMLInputElement>(null)\n    const dispatch = useDispatch()\n\n    const [, drop] = useDrop({\n        accept: 'sort_ingredient',\n        hover: (item:IConstructorItem, monitor) => {\n\n            if (!ref.current || !monitor.isOver()) {\n                return\n            }\n\n            const dragIndex:number = item.index\n            const hoverIndex:number = index\n            if (dragIndex === hoverIndex) {\n                return\n            }\n\n            const hoverBoundingRect = ref.current.getBoundingClientRect()\n            const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\n            const clientOffset: XYCoord | null = monitor.getClientOffset()\n\n            if(!clientOffset){\n                return\n            }\n\n            const hoverClientY = clientOffset.y - hoverBoundingRect.top\n\n            if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n                return\n            }\n            if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n                return\n            }\n\n            item.index = hoverIndex\n\n            dispatch({\n                type: SET_INGREDIENT_INDEX,\n                dragIndex: dragIndex,\n                hoverIndex: hoverIndex,\n            })\n        }\n    })\n\n    const [{isDragging}, drag] = useDrag({\n        type: 'sort_ingredient',\n        item: {\n            index: index\n        },\n        collect: (monitor) => ({\n            isDragging: monitor.isDragging()\n        })\n    })\n\n    const opacity = isDragging ? 0 : 1;\n\n    let name = item.name;\n    if(item.type === TypeIngredient.BUN){\n        name += pos === 'top' ? \" (вверх)\" : pos === 'bottom' ? \" (низ)\" : '';\n    }\n\n    drag(drop(ref))\n\n    return (\n        <div className={styles.item} style={{opacity: opacity}} ref={ref}>\n            {pos === undefined ? <DragIcon type=\"primary\" /> : null }\n            <ConstructorElement\n                type={pos}\n                isLocked={pos !== undefined}\n                text={name}\n                price={item.price}\n                thumbnail={item.image}\n                handleClose={() => dispatch({type: REMOVE_INGREDIENT, index: index})}\n            />\n        </div>\n    )\n}","import React from \"react\";\nimport {ConstructorItem} from \"./constructor-item\";\nimport styles from './burger-constructor.module.css'\nimport {TIngredient} from \"../../utils/types\";\n\ninterface IConstructorList {\n    items: TIngredient[],\n    bun: TIngredient | null\n}\n\nexport function ConstructorList({items, bun}: IConstructorList){\n\n    return (\n        <div className={styles.list}>\n            {bun && <ConstructorItem key={0 + bun._id} pos={\"top\"} item={bun} index={0} />}\n            {!bun && (\n                <div data-class={\"place-bun-top\"} className={styles.empty_ingredient_wrap}>\n                    <div className={styles.empty_ingredient_top}>Выберите булку</div>\n                </div>\n            )}\n            <div data-class={\"place-ingredients\"} className={styles.list_ingredients}>\n                {items.length === 0 && (\n                    <div className={styles.empty_ingredient_wrap}>\n                        <div className={styles.empty_ingredient_list}>\n                            Выберите ингредиенты\n                        </div>\n                    </div>\n                )}\n                {items.map((item, index) => (<ConstructorItem pos={undefined} key={item.uuid} item={item} index={index} />) )}\n            </div>\n            {bun && <ConstructorItem key={999 + bun._id} pos={\"bottom\"} item={bun} index={999} />}\n            {!bun && (\n                <div className={styles.empty_ingredient_wrap}>\n                    <div className={styles.empty_ingredient_bottom}>Выберите булку</div>\n                </div>\n            )}\n        </div>\n    )\n}\n","import React from \"react\";\nimport styles from './modal-overlay.module.css'\n\ninterface IModalOverlay {\n    onClose: () => void\n}\n\nexport function ModalOverlay({ onClose }: IModalOverlay) {\n    return (\n        <div onClick={onClose} className={styles.modal_overlay}></div>\n    )\n}\n","import React, {FC} from \"react\";\nimport ReactDOM from \"react-dom\";\nimport styles from './modal.module.css'\n\nimport {ModalOverlay} from \"../modal-overlay/modal-overlay\";\n\nimport {CloseIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nconst modalRoot: HTMLElement | null  = document.getElementById(\"modal\");\n\ninterface IModal {\n    onClose: () => void\n}\n\nexport const Modal: FC<IModal> = ({ children, onClose }) => {\n\n    React.useEffect(() => {\n        function closeByEscape(evt: KeyboardEvent) {\n            if(evt.key === 'Escape') {\n                onClose();\n            }\n        }\n        document.addEventListener('keydown', closeByEscape);\n        return () => {\n            document.removeEventListener('keydown', closeByEscape);\n        }\n    }, [])\n\n    return modalRoot && ReactDOM.createPortal((\n        <>\n            <div className={styles.modal} onKeyDown={onClose} >\n                <div className={styles.content} tabIndex={0}>\n                    <div className={styles.close} data-class='modal-close-btn' onClick={onClose}><CloseIcon type=\"primary\" /></div>\n                    {children}\n                </div>\n                <ModalOverlay onClose={onClose} />\n            </div>\n        </>\n    ), modalRoot)\n}\n","import React from \"react\";\nimport styles from './order-detail.module.css'\n\nimport {CheckMarkIcon} from \"@ya.praktikum/react-developer-burger-ui-components\"\nimport {useSelector} from \"../../utils/types\";\n\nexport function OrderDetails() {\n\n    const {info} = useSelector(\n        (state) => state.order\n    )\n\n    return (\n        <div className={styles.content}>\n            <div className={styles.order_num}>{info?.number}</div>\n            <div className={styles.order_num_description}>идентификатор заказа</div>\n            <div className={styles.order_status_icon}> <CheckMarkIcon type=\"primary\" /></div>\n            <div className={styles.order_status}>Ваш заказ начали готовить</div>\n            <div className={styles.order_status_description}>Дождитесь готовности на орбитальной станции</div>\n        </div>\n    )\n}","\nexport const SEND_ORDER_REQUEST:'SEND_ORDER_REQUEST' = \"SEND_ORDER_REQUEST\";\nexport const SEND_ORDER_SUCCESS:'SEND_ORDER_SUCCESS' = \"SEND_ORDER_SUCCESS\";\nexport const SEND_ORDER_FAILED:'SEND_ORDER_FAILED' = \"SEND_ORDER_FAILED\";\n\nexport const SHOW_MODAL_INFO_ORDER:'SHOW_MODAL_INFO_ORDER' = \"SHOW_MODAL_INFO_ORDER\"\nexport const HIDE_MODAL_INFO_ORDER:'HIDE_MODAL_INFO_ORDER' = \"HIDE_MODAL_INFO_ORDER\"\n","import {requestMakeOrder} from \"../api\";\nimport {\n    HIDE_MODAL_INFO_ORDER,\n    SEND_ORDER_FAILED,\n    SEND_ORDER_REQUEST,\n    SEND_ORDER_SUCCESS,\n    SHOW_MODAL_INFO_ORDER\n} from \"../constants/order\";\nimport {AppDispatch, AppThunk, TIngredient, TOrder} from \"../../utils/types\";\n\n\nexport interface ISendOrderRequest {\n    readonly type: typeof SEND_ORDER_REQUEST\n}\n\nexport interface ISendOrderSuccess {\n    readonly type: typeof SEND_ORDER_SUCCESS\n    readonly info: TOrder\n}\n\nexport interface ISendOrderFailed {\n    readonly type: typeof SEND_ORDER_FAILED\n}\n\nexport interface IShowModalInfoOrder {\n    readonly type: typeof SHOW_MODAL_INFO_ORDER\n}\n\nexport interface IHideModalInfoOrder {\n    readonly type: typeof HIDE_MODAL_INFO_ORDER\n}\n\nexport type TOrderActions = ISendOrderRequest | ISendOrderSuccess | ISendOrderFailed | IShowModalInfoOrder | IHideModalInfoOrder;\n\nexport const sendOrder: AppThunk = (ingredients: TIngredient[]) => (dispatch: AppDispatch) => {\n    dispatch({\n        type: SEND_ORDER_REQUEST\n    })\n\n    let ids = ingredients.map(x => x._id);\n\n    requestMakeOrder(ids).then(res => {\n        if (res && res.success) {\n            dispatch({\n                type: SEND_ORDER_SUCCESS,\n                info: res.order\n            });\n            dispatch({\n                type: SHOW_MODAL_INFO_ORDER,\n            });\n        } else {\n            dispatch({\n                type: SEND_ORDER_FAILED\n            });\n        }\n    }).catch(() => {\n        dispatch({\n            type: SEND_ORDER_FAILED\n        })\n    })\n}","import React, {SyntheticEvent} from \"react\";\nimport styles from './burger-constructor.module.css'\n\nimport {Button, CurrencyIcon} from \"@ya.praktikum/react-developer-burger-ui-components\"\nimport {ConstructorList} from \"./constructor-list\";\nimport {Modal} from \"../modal/modal\";\nimport {OrderDetails} from \"../order-details/order-details\";\nimport {sendOrder} from \"../../services/actions/order\";\nimport {useDrop} from \"react-dnd\";\nimport {SET_BUN} from \"../../services/constants/burger\";\nimport {useUser} from \"../../services/user\";\nimport {useHistory} from \"react-router-dom\";\nimport {TIngredient, TypeIngredient, useDispatch, useSelector} from \"../../utils/types\";\nimport {AddIngredientBurger} from \"../../services/actions/burger\";\nimport {HIDE_MODAL_INFO_ORDER} from \"../../services/constants/order\";\n\nexport function BurgerConstructor(){\n\n    let user = useUser();\n    const history = useHistory();\n\n    const {bun, ingredients} = useSelector((state) => state.burger)\n\n    const {show_info} = useSelector(\n        (state) => state.order\n    )\n\n    const dispatch = useDispatch()\n    const sendOrderHandler = (e: SyntheticEvent) => {\n        e.preventDefault();\n        if(user && user.user){\n            dispatch(sendOrder([bun, ...ingredients, bun]))\n        }else{\n            history.replace('/login', {r: '/'})\n        }\n    }\n\n    let [, dropTarget] = useDrop({\n        accept: 'ingredient',\n        drop(item:TIngredient){\n            if(item.type === TypeIngredient.BUN){\n                dispatch({\n                    type: SET_BUN,\n                    ingredient: item\n                })\n            }else{\n                dispatch(AddIngredientBurger(item))\n            }\n        }\n    })\n\n    return (\n        <>\n            <div className={styles.content}  ref={dropTarget}>\n                <ConstructorList items={ingredients} bun={bun} />\n                <div className={styles.summary}>\n                <span className=\"text text_type_digits-medium\">\n                    {ingredients.reduce((amount: number, item: TIngredient)=> {return amount + item.price }, 0) + (bun ? bun.price * 2 : 0)} <CurrencyIcon type={\"primary\"} />\n                </span>\n                    <span>\n                    <Button data-class={'order-btn'} htmlType={\"button\"} type=\"primary\" onClick={(e: SyntheticEvent) => sendOrderHandler(e)} size=\"large\">\n                      Оформить заказ\n                    </Button>\n                </span>\n                </div>\n            </div>\n            {show_info && <Modal onClose={() => dispatch({type: HIDE_MODAL_INFO_ORDER}) }><OrderDetails /></Modal>}\n        </>\n    )\n}\n\n","import {uuidv4} from \"../utils\";\n\nimport {TIngredient} from \"../../utils/types\"\nimport {ADD_INGREDIENT, REMOVE_INGREDIENT, SET_BUN, SET_INGREDIENT_INDEX} from \"../constants/burger\";\n\nexport interface IAddIngredientBurger {\n    readonly type: typeof ADD_INGREDIENT;\n    readonly ingredient: TIngredient\n}\n\nexport interface ISetBunBurger {\n    readonly type: typeof SET_BUN;\n    readonly ingredient: TIngredient\n}\n\nexport interface IRemoveIngredient {\n    readonly type: typeof REMOVE_INGREDIENT;\n    readonly index: number\n}\n\nexport interface ISetIngredientIndex{\n    readonly type: typeof SET_INGREDIENT_INDEX;\n    readonly dragIndex: number;\n    readonly hoverIndex: number;\n}\n\nexport type TBurgerActions = IAddIngredientBurger | ISetBunBurger | ISetIngredientIndex | IRemoveIngredient;\n\nexport const AddIngredientBurger = (item: TIngredient): IAddIngredientBurger => ({\n    type: ADD_INGREDIENT,\n    ingredient: {...item, uuid: uuidv4()}\n})\n\n","import React from 'react';\n\nimport {BurgerIngredients} from \"../../components/burger-ingredients/burger-ingredients\";\nimport {BurgerConstructor} from \"../../components/burger-constructor/burger-constructor\";\nimport {DndProvider} from \"react-dnd\";\nimport {HTML5Backend} from \"react-dnd-html5-backend\";\nimport styles from \"./index.module.css\";\n\nfunction Index(){\n    return (\n        <main className={`${styles.main} ${styles.container}`}>\n            <DndProvider backend={HTML5Backend}>\n                <BurgerIngredients />\n                <BurgerConstructor />\n            </DndProvider>\n        </main>\n    )\n}\n\nexport default Index;","import React, {ChangeEvent, useCallback, useState} from 'react';\n\nimport styles from \"./forgot-password.module.css\";\nimport {Button, Input} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {Link, useHistory} from \"react-router-dom\";\nimport {requestResetPassword} from \"../../services/api\";\nimport {useUser} from \"../../services/user\";\n\nfunction ForgotPassword(){\n    const user = useUser();\n\n    const history = useHistory();\n    const [form, setValue] = useState({ email: '' });\n    const onChange = (e: ChangeEvent<HTMLInputElement>) => {\n        setValue({ ...form, [e.target.name]: e.target.value });\n    };\n\n    const request = useCallback(\n        e => {\n            e.preventDefault();\n            requestResetPassword(form.email).then(res => {\n                if (res && res.success) {\n                    history.replace({ pathname: '/reset-password', state: {code_send: true} });\n                }else{\n                    alert('Что-то пошло не так');\n                }\n            })\n        },\n        [form]\n    );\n\n\n    if (user && user.user) {\n        history.replace('/')\n    }\n\n    return (\n        <div className={`page-main-content`}>\n            <div className={styles.content}>\n                <form onSubmit={request}>\n                    <div className={styles.title}>Восстановление пароля</div>\n                    <div className={`pt-6 ${styles.field}`}>\n                        <Input\n                            type={'email'}\n                            value={form.email}\n                            onChange={onChange}\n                            name={'email'}\n                            placeholder={'Укажите e-mail'}\n                        />\n                    </div>\n                    <div className={`pt-6`}>\n                        <Button htmlType={\"submit\"} type=\"primary\" size=\"medium\">\n                            Восстановить\n                        </Button>\n                    </div>\n                    <div className={`pt-20 text text_type_main-default`}>\n                        Вспомнили пароль? <Link to={\"/login\"} className={styles.link}>Войти</Link>\n                    </div>\n                </form>\n            </div>\n        </div>\n    )\n}\n\nexport default ForgotPassword;","import React from \"react\";\nimport styles from './ingredient-details.module.css'\nimport {TIngredient} from \"../../utils/types\";\n\ninterface IIngredientDetails {\n    ingredient: TIngredient\n}\n\nexport function IngredientDetails({ingredient}: IIngredientDetails) {\n\n    return (\n        <div className={styles.content}>\n            <div className={styles.header}>Детали ингредиента</div>\n            <div className={styles.image}>\n                <img src={ingredient.image_large} alt={ingredient.name}/>\n            </div>\n            <p className={styles.name}>{ingredient.name}</p>\n            <div className={styles.grid}>\n                <div className={styles.grid_item}>\n                    <span>Калории,ккал</span>\n                    <div className={styles.grid_item_value}>{ingredient.calories}</div>\n                </div>\n                <div className={styles.grid_item}>\n                    <span>Белки, г</span>\n                    <div className={styles.grid_item_value}>{ingredient.proteins}</div>\n                </div>\n                <div className={styles.grid_item}>\n                    <span>Жиры, г</span>\n                    <div className={styles.grid_item_value}>{ingredient.fat}</div>\n                </div>\n                <div className={styles.grid_item}>\n                    <span>Углеводы, г</span>\n                    <div className={styles.grid_item_value}>{ingredient.carbohydrates}</div>\n                </div>\n            </div>\n        </div>\n    )\n}\n","import React, {useEffect} from 'react';\nimport {useParams} from \"react-router-dom\";\nimport {IngredientDetails} from \"../../components/ingredient-details/ingredient-details\";\n\nimport styles from \"./ingredients.module.css\";\nimport {TIngredient, useSelector} from \"../../utils/types\";\n\n\nfunction Ingredients(){\n\n    const {items} = useSelector(\n        (state) => state.ingredients\n    )\n\n    const {id}: {id: string} = useParams()\n\n    const ingredient = items.find((x: TIngredient) => x._id === id)\n\n    return ( <div className={styles.center}>{ingredient ? <IngredientDetails ingredient={ingredient} /> : \"Загружаю данные\" }</div> )\n}\n\nexport default Ingredients;","import React, {ChangeEvent, useCallback, useEffect, useState} from 'react';\n\nimport styles from \"./login.module.css\";\nimport {Button, Input, PasswordInput} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {Link, useHistory, useLocation} from \"react-router-dom\";\nimport {useUser} from \"../../services/user\";\n\n\nfunction Login(){\n\n    const user = useUser();\n    const history = useHistory();\n    const location = useLocation<{f: string | Location}>();\n\n    const [form, setValue] = useState({ email: '', password: '' });\n    const onChange = (e: ChangeEvent<HTMLInputElement>) => {\n        setValue({ ...form, [e.target.name]: e.target.value });\n    };\n\n    const login = useCallback(\n        e => {\n            e.preventDefault();\n            if(user){\n                user.login(form).then(() => {\n                    history.replace(location.state.f ? location.state.f : '/')\n                }).catch(() => {\n                    alert('error login');\n                })\n            }\n        },\n        [form, user, history, location]\n    );\n\n    useEffect(() => {\n        if (user && user.user) {\n            history.replace('/')\n        }\n    }, [user])\n\n    return (\n        <div className={`page-main-content`}>\n            <div className={styles.content}>\n                <form onSubmit={login}>\n                    <div className={styles.title}>Вход</div>\n                    <div className={`pt-6 ${styles.field}`}>\n                        <Input\n                            data-class={\"input-email\"}\n                            type={'email'}\n                            value={form.email}\n                            onChange={onChange}\n                            name={'email'}\n                            placeholder={'E-mail'}\n                        />\n                    </div>\n                    <div className={`pt-6 ${styles.field}`}>\n                        <PasswordInput\n                            data-class={\"input-password\"}\n                            value={form.password}\n                            onChange={onChange}\n                            name={'password'}\n                        />\n                    </div>\n                    <div className={`pt-6`}>\n                        <Button\n                            data-class={\"btn-login\"} htmlType={\"submit\"} type=\"primary\" size=\"medium\">\n                            Войти\n                        </Button>\n                    </div>\n                    <div className={`pt-20 text text_type_main-default`}>\n                        Вы — новый пользователь? <Link to={\"/register\"} className={styles.link}>Зарегистрироваться</Link>\n                    </div>\n                    <div className={`pt-4 text text_type_main-default`}>\n                        Забыли пароль? <Link to={\"/forgot-password\"} className={styles.link}>Восстановить пароль</Link>\n                    </div>\n                </form>\n            </div>\n        </div>\n    )\n}\n\nexport default Login;","import { useUser } from '../services/user';\nimport { Redirect, Route } from 'react-router-dom';\nimport React, {ReactChild, useEffect, useState} from 'react';\n\ninterface IProtectedRoute{\n    children: ReactChild,\n    path: string,\n    exact?: boolean\n}\n\nexport function ProtectedRoute({ children, ...rest }: IProtectedRoute) {\n    //@ts-ignore\n    let { loadUserInfo, ...user } = useUser();\n    const [isUserLoaded, setUserLoaded] = useState(false);\n\n    const init = () => {\n        if(!user.user){\n            loadUserInfo().finally(() => {\n                setUserLoaded(true);\n            });\n        }else{\n            setUserLoaded(true);\n        }\n    };\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    if (!isUserLoaded) {\n        return null;\n    }\n\n    return (\n        <Route\n            {...rest}\n            render={({ location }) =>\n                user.user ? (\n                    children\n                ) : (\n                    <Redirect\n                        to={{\n                            pathname: '/login',\n                            state: { f: location }\n                        }}\n                    />\n                )\n            }\n        />\n    );\n}","import React from 'react';\nimport styles from \"./profile.module.css\";\nimport {NavLink} from \"react-router-dom\"\n\nfunction ProfileMenu(){\n    return (\n        <menu className={styles.menu}>\n            <ul>\n                <li>\n                    <NavLink to={{pathname: `/profile` }} exact className={styles.link} activeClassName={styles.active}>\n                        <span>Профиль</span>\n                    </NavLink>\n                </li>\n                <li>\n                    <NavLink to={{pathname: `/profile/orders` }} exact className={styles.link} activeClassName={styles.active}>\n                        <span>История заказов</span>\n                    </NavLink>\n                </li>\n                <li>\n                    <NavLink to={{pathname: `/profile/logout` }} exact className={styles.link} activeClassName={styles.active}>\n                        <span>Выход</span>\n                    </NavLink>\n                </li>\n                <li className={\"pt-20 text_type_main-default text_color_inactive\"}>В этом разделе вы можете\n                    изменить свои персональные данные</li>\n            </ul>\n        </menu>\n    )\n}\n\nexport default ProfileMenu","import React, {ChangeEvent, FormEvent, useState} from 'react';\nimport {useUser} from \"../../services/user\";\n\nimport styles from \"./profile.module.css\";\nimport {Input, PasswordInput, Button} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {TUserSave} from \"../../utils/types\";\n\nfunction Profile(){\n\n    const user = useUser();\n    const [isChangeForm, setIsChangeForm] = useState(false)\n\n    const [form, setValue] = useState<TUserSave>({\n        name: user && user.user ? user.user.name : \"\",\n        email: user && user.user ? user.user.email : \"\",\n        password: ''\n    });\n\n    const onChange = (e: ChangeEvent<HTMLInputElement>) => {\n        setIsChangeForm(true);\n        setValue({ ...form, [e.target.name]: e.target.value });\n    };\n\n    const save = (e: FormEvent) => {\n        e.preventDefault();\n        setIsChangeForm(false);\n        user && user.saveUserInfo(form)\n    };\n\n    const cancel = () => {\n        console.log('cancel')\n        setIsChangeForm(false);\n        setValue({\n            name: user && user.user ? user.user.name : \"\",\n            email: user && user.user ? user.user.email : \"\",\n            password: ''\n        })\n    };\n\n    return (\n        <div>\n            <form onSubmit={save}>\n            <div className={`${styles.field}`}>\n                <Input\n                    type={'text'}\n                    value={form.name}\n                    onChange={onChange}\n                    name={'name'}\n                    placeholder={'Имя'}\n                />\n            </div>\n            <div className={`pt-6 ${styles.field}`}>\n                <Input\n                    type={'email'}\n                    value={form.email}\n                    onChange={onChange}\n                    name={'email'}\n                    placeholder={'E-mail'}\n                />\n            </div>\n            <div className={`pt-6 ${styles.field}`}>\n                <PasswordInput\n                    value={form.password}\n                    onChange={onChange}\n                    name={'password'}\n                />\n            </div>\n\n            { !isChangeForm ||\n                (<div className={\"pt-5\"}>\n                    <Button htmlType={\"submit\"} type=\"primary\">\n                        Сохранить изменения\n                    </Button>\n                    <Button htmlType={\"button\"} type=\"secondary\" onClick={() => cancel()}>\n                        Отмена\n                    </Button>\n                </div>)\n            }\n            </form>\n        </div>\n    )\n}\n\nexport default Profile;","import {OrderStatus, TOrder, useSelector} from \"../../utils/types\";\nimport {CurrencyIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React from \"react\";\n\nimport styles from './order-small.module.css';\n\ninterface IOrderSmall {\n    order: TOrder,\n    showStatus?: boolean\n}\n\nexport function OrderSmall({order, showStatus = false}: IOrderSmall) {\n\n    const {items: ingredients} = useSelector((state) => state.ingredients)\n\n    const created_at = new Date(order.createdAt)\n\n    const amount = order.ingredients.reduce((accumulator, currentValue) => {\n        const item = ingredients.find(x => x._id === currentValue)\n        return item ? accumulator + item.price : accumulator\n    }, 0);\n\n    return (\n        <div className={styles.item}>\n            <div className={`text text_type_main-default ${styles.info}`}>\n                <div>#{order.number}</div>\n                <div className={styles.right}>{created_at.toLocaleString()}</div>\n            </div>\n            <div className=\"text text_type_main-medium\">\n                {order.name}\n            </div>\n            {showStatus && (\n                <div className=\"text text_type_main-small\">\n                    {OrderStatus.CREATED === order.status ? \"Создан\" : null}\n                    {OrderStatus.PENDING === order.status ? \"Отменен\" : null}\n                    {OrderStatus.DONE === order.status ? \"Выполнен\" : null}\n                </div>\n            )}\n            <div className={styles.info}>\n                <div className={styles.list_ingr}>\n                    {order.ingredients.slice(0, 5).map((y, index) => {\n                        const item = ingredients.find(x => x._id === y)\n                        return item && (\n                            <div key={item._id + index} className={styles.img_preview} style={{backgroundImage: `url(${item.image_large})`}}>&nbsp;</div>\n                        )\n                    })}\n                </div>\n                <div className={` ${styles.info_price}`}>\n                    <span className={'text text text_type_digits-default'}>{amount}</span>&nbsp;<CurrencyIcon type=\"primary\" />\n                </div>\n            </div>\n        </div>\n    )\n}","export const WS_CONNECTION_START: 'WS_CONNECTION_START' = 'WS_CONNECTION_START';\nexport const WS_CONNECTION_STOP: 'WS_CONNECTION_STOP' = 'WS_CONNECTION_STOP';\nexport const WS_CONNECTION_SUCCESS: 'WS_CONNECTION_SUCCESS' = 'WS_CONNECTION_SUCCESS';\nexport const WS_CONNECTION_ERROR: 'WS_CONNECTION_ERROR' = 'WS_CONNECTION_ERROR';\nexport const WS_GET_MESSAGE: 'WS_GET_MESSAGE' = 'WS_GET_MESSAGE';\nexport const WS_CONNECTION_CLOSED: 'WS_CONNECTION_CLOSED' = 'WS_CONNECTION_CLOSED';\n","import {\n    WS_CONNECTION_CLOSED,\n    WS_CONNECTION_ERROR,\n    WS_CONNECTION_START, WS_CONNECTION_STOP,\n    WS_CONNECTION_SUCCESS,\n    WS_GET_MESSAGE\n} from \"../constants/ws\";\nimport {TOrder} from \"../../utils/types\";\n\n\nexport interface IWsConnectionStart {\n    readonly type: typeof WS_CONNECTION_START;\n    readonly url: string\n}\n\nexport interface IWsConnectionStop {\n    readonly type: typeof WS_CONNECTION_STOP;\n}\n\nexport interface IWsConnectionSuccess {\n    readonly type: typeof WS_CONNECTION_SUCCESS;\n    readonly event: Event\n}\n\nexport interface IWsConnectionError {\n    readonly type: typeof WS_CONNECTION_ERROR;\n    readonly event: Event\n}\n\nexport interface IWsGetMessage {\n    readonly type: typeof WS_GET_MESSAGE;\n    readonly data: TOrder[]\n    readonly cntAll: number\n    readonly cntToday: number\n}\n\nexport interface IWsConnectionClose {\n    readonly type: typeof WS_CONNECTION_CLOSED;\n    readonly event: Event\n}\n\nexport type TWSActions = IWsConnectionStart | IWsConnectionSuccess | IWsConnectionError | IWsGetMessage | IWsConnectionClose | IWsConnectionStop;\n\nexport const WsConnectionStart = (url: string): IWsConnectionStart => ({\n    type: WS_CONNECTION_START,\n    url: url\n})\n\nexport const WsConnectionStop = (): IWsConnectionStop => ({\n    type: WS_CONNECTION_STOP,\n})\n\nexport const WsConnectionSuccess = (event: Event): IWsConnectionSuccess => ({\n    type: WS_CONNECTION_SUCCESS,\n    event: event\n})\n\nexport const WsConnectionError = (event: Event): IWsConnectionError => ({\n    type: WS_CONNECTION_ERROR,\n    event: event\n})\n\nexport const WsGetMessage = (data: TOrder[], cntToday: number, cntAll: number): IWsGetMessage => ({\n    type: WS_GET_MESSAGE,\n    data: data,\n    cntAll: cntAll,\n    cntToday: cntToday\n})\n\nexport const WsConnectionClose = (event: Event): IWsConnectionClose => ({\n    type: WS_CONNECTION_CLOSED,\n    event: event\n})","import React from \"react\";\n\nimport {OrderStatus, TOrder, useSelector} from \"../../utils/types\";\nimport styles from \"./order-info.module.css\";\nimport {CurrencyIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\ninterface IOrderInfo {\n    order: TOrder\n}\n\nexport function OrderInfo({order}: IOrderInfo) {\n\n    const {items: ingredients} = useSelector((state) => state.ingredients)\n\n    const created_at = new Date(order.createdAt)\n\n    const amount = order.ingredients.reduce((accumulator, currentValue) => {\n        const item = ingredients.find(x => x._id === currentValue)\n        return item ? accumulator + item.price : accumulator\n    }, 0);\n\n    return (\n        <div className={\"p-10\"}>\n            <div className=\"text text_type_digits-default mb-10\">#{order.number}</div>\n            <div className=\"text text_type_main-medium mb-3\">{order.name}</div>\n            <div className=\"text text_type_main-default mb-15\">\n                {OrderStatus.CREATED === order.status ? \"Создан\" : null}\n                {OrderStatus.PENDING === order.status ? \"Отменен\" : null}\n                {OrderStatus.DONE === order.status ? \"Выполнен\" : null}\n            </div>\n            <div className=\"text text_type_main-medium mb-6\">Состав:</div>\n            <div  className={`text text_type_main-default ${styles.list_items}`}>\n                {order.ingredients.map((y, index) => {\n                    const item = ingredients.find(x => x._id === y)\n                    return item && (\n                        <div key={item._id + index} className={styles.item}>\n                            <div className={styles.item_info}>\n                                <div>\n                                    <div className={styles.img_preview} style={{backgroundImage: `url(${item.image_large})`}}>&nbsp;</div>\n                                </div>\n                                <div>\n                                    {item.name}\n                                </div>\n                            </div>\n                            <div>\n                                {item.price} &nbsp;<CurrencyIcon type=\"primary\" />\n                            </div>\n                        </div>\n                    )\n                })}\n            </div>\n            <div className={`text text_type_main-small mt-10 ${styles.footer}`}>\n                <div>{created_at.toLocaleString()}</div>\n                <div>{amount} &nbsp;<CurrencyIcon type=\"primary\" /></div>\n            </div>\n        </div>\n    )\n}","import React from 'react';\nimport {useParams} from \"react-router-dom\";\nimport {TOrder} from \"../../utils/types\";\nimport {OrderInfo} from \"../../components/order-info/order-info\";\n\nimport styles from \"./profile.module.css\";\n\ninterface IProfileOrder {\n    listOrders: TOrder[]\n}\n\nfunction ProfileOrder({listOrders}: IProfileOrder){\n    const {id}: {id: string} = useParams()\n    const order = listOrders.find((x: TOrder) => x._id === id)\n    return (\n        <div className={styles.info_order}>\n            { order && <OrderInfo order={order} /> }\n        </div>\n    )\n}\n\nexport default ProfileOrder;","import React from \"react\";\nimport {Modal} from \"../modal/modal\";\nimport {useHistory, useParams} from \"react-router-dom\";\nimport {TOrder, useSelector} from \"../../utils/types\";\nimport {OrderInfo} from \"./order-info\";\n\nfunction ModalOrderInfo(){\n\n    let history = useHistory();\n    const {id}: {id: string} = useParams();\n\n    const {body: listOrders} = useSelector((state) => state.ws)\n    const order = listOrders.find((x: TOrder) => x._id === id)\n\n    let back = () => {\n        history.goBack();\n    };\n\n    return (\n        <>\n            {order ? <Modal onClose={back}><OrderInfo order={order} /></Modal> : \"\" }\n        </>\n    )\n}\n\nexport default ModalOrderInfo;","import React, {useEffect} from 'react';\nimport {useDispatch, useSelector} from \"../../utils/types\";\n\nimport styles from \"./profile.module.css\";\nimport {OrderSmall} from \"../../components/order-small/order-small\";\nimport {getCookie} from \"../../services/utils\";\nimport {WsConnectionStart, WsConnectionStop} from \"../../services/actions/ws\";\nimport {Link, Route, Switch, useLocation} from \"react-router-dom\";\nimport {ProtectedRoute} from \"../../components/protected-route\";\nimport ProfileOrderPage from \"./order\";\nimport ModalOrderInfo from \"../../components/order-info/modal\";\n\nfunction ProfileOrders(){\n\n    const {body: listOrders} = useSelector((state) => state.ws)\n\n    const accessToken =  getCookie('access_token')\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(WsConnectionStart(`wss://norma.nomoreparties.space/orders?token=${accessToken}`))\n        return () => {\n            dispatch(WsConnectionStop())\n        }\n    }, [])\n\n\n    const location = useLocation<{ background_my: boolean}>();\n    const background = (location.state as any)?.background_my;\n\n    return (\n        <div>\n            <Switch location={background || location}>\n                <ProtectedRoute path=\"/profile/orders\" exact={true}>\n                    <div>\n                        <div className={styles.list_wrap}>\n                            {listOrders.map((order) => (\n                                <Link key={order._id}\n                                      to={{\n                                          pathname: `/profile/orders/${order._id}`,\n                                          state: {\n                                              background_my: location,\n                                          }\n                                      }}\n                                      className={styles.link_clear}\n                                >\n                                    <OrderSmall showStatus={true} order={order} />\n                                </Link>\n                            ))}\n                        </div>\n                    </div>\n                </ProtectedRoute>\n                <ProtectedRoute path=\"/profile/orders/:id\" exact={true}>\n                    <ProfileOrderPage listOrders={listOrders} />\n                </ProtectedRoute>\n            </Switch>\n            {background && <Route path=\"/profile/orders/:id\" children={<ModalOrderInfo />} />}\n        </div>\n    )\n}\n\nexport default ProfileOrders;","import React, {useEffect} from 'react';\nimport {Redirect} from \"react-router-dom\";\nimport {useUser} from \"../../services/user\";\n\n\nfunction ProfileLogout(){\n    const user = useUser()\n\n    useEffect(() => {\n        user && user.logout()\n    }, [])\n\n    return (\n        <Redirect to=\"/\" />\n    )\n}\n\nexport default ProfileLogout;","import React, {useEffect} from 'react';\n\nimport { BrowserRouter as Router, Switch } from 'react-router-dom';\nimport {ProtectedRoute} from \"../../components/protected-route\";\n\nimport styles from \"./profile.module.css\";\n\nimport ProfileMenu from \"./menu\"\nimport ProfilePage from \"./profile\"\nimport ProfileOrdersPage from \"./orders\"\nimport ProfileLogoutPage from \"./logout\"\n\nfunction ProfileIndex() {\n\n    return (\n        <main className={`${styles.main} ${styles.container}`}>\n            <div className={styles.menu}>\n                <ProfileMenu />\n            </div>\n            <div className={styles.content}>\n                <Switch>\n                    <ProtectedRoute path=\"/profile\" exact={true}>\n                        <ProfilePage />\n                    </ProtectedRoute>\n                    <ProtectedRoute path=\"/profile/orders\">\n                        <ProfileOrdersPage />\n                    </ProtectedRoute>\n                    <ProtectedRoute path=\"/profile/logout\" exact={true}>\n                        <ProfileLogoutPage />\n                    </ProtectedRoute>\n                </Switch>\n            </div>\n        </main>\n    )\n\n}\n\nexport default  ProfileIndex","import React, {ChangeEvent, useCallback, useState} from 'react';\n\nimport styles from \"./register.module.css\";\nimport {Button, Input, PasswordInput} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {Link, useHistory} from \"react-router-dom\";\nimport {useUser} from \"../../services/user\";\n\n\nfunction Register(){\n    const user = useUser();\n\n    const history = useHistory();\n    const [form, setValue] = useState({ name: '', email: '', password: '' });\n    const onChange = (e: ChangeEvent<HTMLInputElement>) => {\n        setValue({ ...form, [e.target.name]: e.target.value });\n    };\n\n    const register = useCallback(\n        e => {\n            e.preventDefault();\n            user && user.register(form).then(() => {\n                history.replace('/')\n            }).catch(() => {\n                alert('error register');\n            })\n        },\n        [user, form, history]\n    );\n\n    if (user?.user) {\n        // @ts-ignore\n        history.replace(history.location.state.r || '/')\n    }\n\n    return (\n        <div className={`page-main-content`}>\n            <div className={styles.content}>\n                <form onSubmit={register}>\n                    <div className={styles.title}>Регистрация</div>\n                    <div className={`pt-6 ${styles.field}`}>\n                        <Input\n                            type={'text'}\n                            value={form.name}\n                            onChange={onChange}\n                            name={'name'}\n                            placeholder={'Имя'}\n                        />\n                    </div>\n                    <div className={`pt-6 ${styles.field}`}>\n                        <Input\n                            type={'email'}\n                            value={form.email}\n                            onChange={onChange}\n                            name={'email'}\n                            placeholder={'E-mail'}\n                        />\n                    </div>\n                    <div className={`pt-6 ${styles.field}`}>\n                        <PasswordInput\n                            value={form.password}\n                            onChange={onChange}\n                            name={'password'}\n                        />\n                    </div>\n                    <div className={`pt-6`}>\n                        <Button htmlType={\"submit\"} type=\"primary\" size=\"medium\">\n                            Зарегистрироваться\n                        </Button>\n                    </div>\n                    <div className={`pt-20 text text_type_main-default`}>\n                        Уже зарегистрированы? <Link to={\"/login\"} className={styles.link}>Войти</Link>\n                    </div>\n                </form>\n            </div>\n        </div>\n    )\n}\n\nexport default Register;","import React, {ChangeEvent, useCallback, useState} from 'react';\nimport styles from \"../login/login.module.css\";\nimport {Button, Input, PasswordInput} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {Link, useHistory, useLocation} from \"react-router-dom\";\nimport {requestSavePassword} from \"../../services/api\";\nimport {useUser} from \"../../services/user\";\n\n// import styles from \"./reset-password.module.css\";\n\n\nfunction ResetPassword(){\n    const user = useUser();\n\n    const {state} = useLocation<{code_send: boolean}>()\n\n    const history = useHistory();\n    const [form, setValue] = useState({ password: '', code: '' });\n    const onChange = (e: ChangeEvent<HTMLInputElement>) => {\n        setValue({ ...form, [e.target.name]: e.target.value });\n    };\n\n    const request = useCallback(\n        e => {\n            e.preventDefault();\n            requestSavePassword(form.password, form.code).then(res => {\n                if (res && res.success) {\n                    history.replace({ pathname: '/login' });\n                }else{\n                    console.log(res)\n                    alert('Что-то пошло не так');\n                }\n            })\n        },\n        [form, history]\n    );\n\n    if (user && user.user) {\n        history.replace('/')\n    }\n\n\n    if(!state || !state.hasOwnProperty('code_send')){\n        history.replace('/forgot-password')\n    }\n\n    return (\n        <div className={`page-main-content`}>\n            <div className={styles.content}>\n                <form onSubmit={request}>\n                    <div className={styles.title}>Восстановление пароля</div>\n                    <div className={`pt-6 ${styles.field}`}>\n                        <PasswordInput\n                            value={form.password}\n                            onChange={onChange}\n                            name={'password'}\n                        />\n                    </div>\n                    <div className={`pt-6 ${styles.field}`}>\n                        <Input\n                            value={form.code}\n                            onChange={onChange}\n                            name={'code'}\n                        />\n                    </div>\n                    <div className={`pt-6`}>\n                        <Button htmlType={\"submit\"} type=\"primary\" size=\"medium\">\n                            Сохранить\n                        </Button>\n                    </div>\n                    <div className={`pt-20 text text_type_main-default`}>\n                        Вспомнили пароль? <Link to={\"/login\"} className={styles.link}>Войти</Link>\n                    </div>\n                </form>\n            </div>\n        </div>\n    )\n}\n\nexport default ResetPassword;","import React from 'react';\nimport styles from \"./feed.module.css\";\nimport {OrderSmall} from \"../../components/order-small/order-small\";\nimport {OrderStatus, TOrder} from \"../../utils/types\";\nimport {Link, useLocation} from \"react-router-dom\";\n\ninterface IFeed {\n    listOrders: TOrder[],\n    cntAll: number,\n    cntToday: number\n}\n\nfunction Feed({listOrders, cntAll, cntToday}: IFeed){\n\n    let location = useLocation();\n\n    return (\n        <div className={`${styles.container}`}>\n            <h1 className={\"pt-10 pb-5 text text_type_main-large\"}>Лента заказов</h1>\n            <main className={`${styles.main}`}>\n                <div>\n                    <div className={styles.list_wrap}>\n                        {listOrders.map((order) => (\n                            <Link key={order._id}\n                                to={{\n                                    pathname: `/feed/${order._id}`,\n                                    state: {\n                                        background_feed: location,\n                                    }\n                                }}\n                                  className={styles.link}\n                            >\n                                <OrderSmall  order={order} />\n                            </Link>\n                        ))}\n                    </div>\n                </div>\n                <div className={styles.content}>\n                    <div className={styles.grid_stats}>\n                        <div>\n                            <div className=\"text text_type_main-medium mb-4\">Готовы:</div>\n                            {listOrders.filter(order => order.status === OrderStatus.DONE).slice(0, 5).map(order => (\n                                <div key={order.number} className={`text text_type_digits-default mb-1`}>{order.number}</div>\n                            ))}\n                        </div>\n                        <div>\n                            <div className=\"text text_type_main-medium\">В работе:</div>\n                            {listOrders.filter(order => order.status === OrderStatus.CREATED).map(order => (\n                                <div key={order.number}  className={`text text_type_digits-default mb-1`}>{order.number}</div>\n                            ))}\n                        </div>\n                    </div>\n                    <div>\n                        <div className=\"text text_type_main-medium\">Выполнено за все время:</div>\n                        <div className=\"text text_type_digits-large\">{cntAll}</div>\n                    </div>\n                    <div>\n                        <div className=\"text text_type_main-medium\">Выполнено за сегодня:</div>\n                        <div className=\"text text_type_digits-large\">{cntToday}</div>\n                    </div>\n                </div>\n            </main>\n        </div>\n    )\n}\n\nexport default Feed;","import React from 'react';\nimport styles from \"./feed.module.css\";\nimport {TOrder} from \"../../utils/types\";\nimport {useParams} from \"react-router-dom\";\nimport {OrderInfo} from \"../../components/order-info/order-info\";\n\ninterface IOrder {\n    listOrders: TOrder[]\n}\n\nfunction Order({listOrders}: IOrder){\n    const {id}: {id: string} = useParams()\n    const order = listOrders.find((x: TOrder) => x._id === id)\n    return (\n        <div className={styles.info_order}>\n            { order && <OrderInfo order={order} /> }\n        </div>\n    )\n}\n\nexport default Order;","import React, {useEffect} from 'react';\n\nimport {Switch, Route, useLocation} from 'react-router-dom';\n\nimport FeedPage from \"./feed\"\nimport OrderPage from \"./order\"\nimport {useDispatch, useSelector} from \"../../utils/types\";\nimport {WsConnectionStart, WsConnectionStop} from \"../../services/actions/ws\";\n\nfunction ProfileIndex() {\n    const dispatch = useDispatch()\n\n    const {body: listOrders, cntAll, cntToday} = useSelector((state) => state.ws)\n\n    useEffect(() => {\n        dispatch(WsConnectionStart('wss://norma.nomoreparties.space/orders/all'))\n        return () => {\n            dispatch(WsConnectionStop())\n        }\n    }, [])\n\n    const location = useLocation<{ background_feed: boolean}>();\n    const background = (location.state as any)?.background_feed;\n\n    return (\n        <div>\n            <Switch location={background || location}>\n                <Route path=\"/feed/:id\" exact={true}>\n                    <OrderPage listOrders={listOrders ?? []} />\n                </Route>\n                <Route path=\"/feed\">\n                    <FeedPage listOrders={listOrders} cntToday={cntToday} cntAll={cntAll} />\n                </Route>\n            </Switch>\n        </div>\n    )\n\n}\n\nexport default  ProfileIndex","export const GET_INGREDIENTS_REQUEST:'GET_INGREDIENTS_REQUEST' = \"GET_INGREDIENTS_REQUEST\";\nexport const GET_INGREDIENTS_SUCCESS:'GET_INGREDIENTS_SUCCESS' = \"GET_INGREDIENTS_SUCCESS\";\nexport const GET_INGREDIENTS_FAILED:'GET_INGREDIENTS_FAILED' = \"GET_INGREDIENTS_FAILED\";\n","import {requestGetIngredients} from \"../api\";\nimport {GET_INGREDIENTS_FAILED, GET_INGREDIENTS_REQUEST, GET_INGREDIENTS_SUCCESS} from \"../constants/ingridients\";\nimport {AppDispatch, AppThunk, TIngredient} from \"../../utils/types\";\n\nexport interface IGetIngredientsRequest {\n    readonly type: typeof GET_INGREDIENTS_REQUEST\n}\n\nexport interface IGetIngredientsSuccess {\n    readonly type: typeof GET_INGREDIENTS_SUCCESS\n    readonly items: TIngredient[]\n}\n\nexport interface IGetIngredientsFailed {\n    readonly type: typeof GET_INGREDIENTS_FAILED\n}\n\n\n\nexport const getIngredients: AppThunk = () => (dispatch: AppDispatch) => {\n    dispatch({\n        type: GET_INGREDIENTS_REQUEST\n    })\n    requestGetIngredients().then(res => {\n        if (res && res.success) {\n            dispatch({\n                type: GET_INGREDIENTS_SUCCESS,\n                items: res.data\n            });\n        } else {\n            dispatch({\n                type: GET_INGREDIENTS_FAILED\n            });\n        }\n    }).catch(() => {\n        dispatch({\n            type: GET_INGREDIENTS_FAILED\n        })\n    })\n}\n\n\nexport type TLoadIngredientsActions = IGetIngredientsRequest | IGetIngredientsSuccess | IGetIngredientsFailed;","import React, {useEffect} from \"react\";\nimport {Modal} from \"../modal/modal\";\nimport {IngredientDetails} from \"./ingredient-details\";\nimport {useHistory, useParams} from \"react-router-dom\";\nimport {getIngredients} from \"../../services/actions/ingridients\";\nimport {TIngredient, useDispatch, useSelector} from \"../../utils/types\";\n\nfunction ModalIngredient(){\n\n    let history = useHistory();\n    const {id}: {id: string} = useParams();\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(getIngredients())\n    }, [])\n\n    const {items} = useSelector(\n        (state) => state.ingredients\n    )\n\n    const ingredient = items.find((x: TIngredient) => x._id === id)\n\n    let back = () => {\n        history.goBack();\n    };\n\n    return (\n        <>\n            {ingredient ? <Modal onClose={back}><IngredientDetails ingredient={ingredient} /></Modal> : \"\" }\n        </>\n    )\n}\n\nexport default ModalIngredient;","import React from 'react';\nimport '@ya.praktikum/react-developer-burger-ui-components'\nimport {Route, Switch, useLocation} from 'react-router-dom';\n\n\nimport {ProvideUser} from '../../services/user'\n\nimport {AppHeader} from \"../app-header/app-header\";\nimport IndexPage from \"../../pages/index/index\"\nimport ForgotPasswordPage from \"../../pages/forgot-password/forgot-password\"\nimport IngredientsPage from \"../../pages/ingredients/ingredients\"\nimport LoginPage from \"../../pages/login/login\"\nimport ProfileIndex from \"../../pages/profile/index\"\nimport RegisterPage from \"../../pages/register/register\"\nimport ResetPasswordPage from \"../../pages/reset-password/reset-password\"\n\nimport FeedPage from \"../../pages/feed/index\"\n\nimport {ProtectedRoute} from \"../protected-route\";\nimport ModalIngredient from \"../ingredient-details/modal\";\nimport {getIngredients} from \"../../services/actions/ingridients\";\nimport {useDispatch} from \"../../utils/types\";\n\nfunction App() {\n\n    const dispatch = useDispatch();\n\n    React.useEffect(() => {\n        dispatch(getIngredients())\n    }, [])\n\n    const location = useLocation<{ background: boolean}>();\n    const background = (location.state as any)?.background;\n\n    return (\n        <ProvideUser>\n            <AppHeader />\n            <Switch location={background || location}>\n                <Route path=\"/register\" exact={true}>\n                    <RegisterPage />\n                </Route>\n                <Route path=\"/feed\">\n                    <FeedPage />\n                </Route>\n                <Route path=\"/login\" exact={true}>\n                    <LoginPage />\n                </Route>\n                <Route path=\"/forgot-password\" exact={true}>\n                    <ForgotPasswordPage />\n                </Route>\n                <Route path=\"/reset-password\" exact={true}>\n                    <ResetPasswordPage />\n                </Route>\n                <ProtectedRoute path=\"/profile\">\n                    <ProfileIndex />\n                </ProtectedRoute>\n                <Route path=\"/ingredients/:id\" exact={true}>\n                    <IngredientsPage />\n                </Route>\n                <Route path=\"/\" exact={true}>\n                    <IndexPage />\n                </Route>\n            </Switch>\n\n            {background && <Route path=\"/ingredients/:id\" children={<ModalIngredient />} />}\n        </ProvideUser>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {ADD_INGREDIENT, REMOVE_INGREDIENT, SET_BUN, SET_INGREDIENT_INDEX} from \"../constants/burger\"\n\nimport {TIngredient} from \"../../utils/types\";\nimport type {TBurgerActions} from \"../actions/burger\"\n\ntype TBurgerState = {\n    bun: TIngredient | null;\n    ingredients: TIngredient[];\n}\n\nexport const initialState: TBurgerState = {\n    bun: null,\n    ingredients: [],\n}\n\nexport const burgerReducer = (state = initialState, action: TBurgerActions):TBurgerState  => {\n    switch (action.type) {\n        case SET_BUN: {\n            return {\n                ...state,\n                bun: action.ingredient\n            };\n        }\n        case ADD_INGREDIENT: {\n            const ingrs = state.ingredients;\n            ingrs.push(action.ingredient)\n            return {\n                ...state,\n                ingredients: ingrs\n            };\n        }\n        case SET_INGREDIENT_INDEX: {\n            const newIngrs = [...state.ingredients];\n            const ingredient = newIngrs[action.dragIndex]\n            newIngrs.splice(action.dragIndex, 1)\n            newIngrs.splice(action.hoverIndex, 0, ingredient)\n            return {\n                ...state,\n                ingredients: newIngrs\n            };\n        }\n        case REMOVE_INGREDIENT: {\n            return {\n                ...state,\n                ingredients: [...state.ingredients.filter((_, index) => index !== action.index)]\n            };\n        }\n        default:\n            return state;\n    }\n}","import {GET_INGREDIENTS_SUCCESS, GET_INGREDIENTS_REQUEST, GET_INGREDIENTS_FAILED} from \"../constants/ingridients\"\nimport {TIngredient} from \"../../utils/types\";\nimport type {TLoadIngredientsActions} from \"../actions/ingridients\"\n\ntype TInitialState = {\n    request: boolean,\n    failed: boolean,\n    items: TIngredient[],\n}\n\nexport const initialState: TInitialState = {\n    request: false,\n    failed: false,\n    items: [],\n}\n\nexport const ingredientsReducer = (state = initialState, action: TLoadIngredientsActions): TInitialState => {\n    switch (action.type) {\n        case GET_INGREDIENTS_REQUEST: {\n            return {\n                ...state,\n                request: true,\n                failed: false,\n            };\n        }\n        case GET_INGREDIENTS_SUCCESS: {\n            return {\n                ...state,\n                items: action.items,\n                request: false,\n                failed: false,\n            };\n        }\n        case GET_INGREDIENTS_FAILED: {\n            return {\n                ...state,\n                request: false,\n                failed: true,\n            };\n        }\n        default:\n            return state;\n    }\n}","import {TOrderActions} from \"../actions/order\";\nimport {\n    HIDE_MODAL_INFO_ORDER,\n    SEND_ORDER_FAILED,\n    SEND_ORDER_REQUEST,\n    SEND_ORDER_SUCCESS,\n    SHOW_MODAL_INFO_ORDER\n} from \"../constants/order\";\n\nimport {TOrder} from \"../../utils/types\";\n\ntype TInitialState = {\n    request: boolean;\n    failed: boolean;\n    show_info: boolean;\n    info: TOrder | null;\n}\n\nexport const initialState: TInitialState = {\n    request: false,\n    failed: false,\n    show_info: false,\n    info: null\n}\n\nexport const orderReducer = (state = initialState, action: TOrderActions): TInitialState => {\n    switch (action.type) {\n        case SHOW_MODAL_INFO_ORDER: {\n            return {\n                ...state,\n                show_info: true,\n            };\n        }\n        case HIDE_MODAL_INFO_ORDER: {\n            return {\n                ...state,\n                show_info: false,\n            };\n        }\n        case SEND_ORDER_REQUEST: {\n            return {\n                ...state,\n                request: true,\n                failed: false,\n            };\n        }\n        case SEND_ORDER_SUCCESS: {\n            return {\n                ...state,\n                info: action.info,\n                request: false,\n                failed: false,\n            };\n        }\n        case SEND_ORDER_FAILED: {\n            return {\n                ...state,\n                info: null,\n                request: false,\n                failed: true,\n            };\n        }\n        default:\n            return state;\n    }\n}\n\n","export const SHOW_MODAL: \"SHOW_MODAL\" = \"SHOW_MODAL\"\nexport const HIDE_MODAL: \"HIDE_MODAL\" = \"HIDE_MODAL\"\nexport const SET_INGREDIENT: \"SET_INGREDIENT\" = \"SET_INGREDIENT\"","import {TIngredient} from \"../../utils/types\";\nimport {TViewIngredientActions} from \"../actions/view-ingridient\";\nimport {HIDE_MODAL, SET_INGREDIENT, SHOW_MODAL} from \"../constants/view-ingridient\";\n\ntype TInitialState = {\n    showModal: boolean,\n    ingredient: TIngredient | {}\n}\n\nexport const initialState:TInitialState = {\n    showModal: false,\n    ingredient: {}\n}\n\nexport const viewIngredientReducer = (state = initialState, action: TViewIngredientActions): TInitialState => {\n    switch (action.type) {\n        case SHOW_MODAL: {\n            return {\n                ...state,\n                showModal: true,\n            };\n        }\n        case HIDE_MODAL: {\n            return {\n                ...state,\n                showModal: false,\n            };\n        }\n        case SET_INGREDIENT: {\n            return {\n                ...state,\n                ingredient: action.ingredient,\n            };\n        }\n        default:\n            return state;\n    }\n}","import {TWSActions} from \"../actions/ws\";\nimport {\n    WS_CONNECTION_CLOSED,\n    WS_CONNECTION_ERROR,\n    WS_CONNECTION_START,\n    WS_CONNECTION_SUCCESS,\n    WS_GET_MESSAGE\n} from \"../constants/ws\";\nimport {TOrder} from \"../../utils/types\";\n\ntype TWSState = {\n    wsConnected: boolean;\n    cntToday: number;\n    cntAll: number;\n    body: TOrder[];\n    error?: Event;\n}\n\nexport const initialState: TWSState = {\n    wsConnected: false,\n    cntToday: 0,\n    cntAll: 0,\n    body: []\n};\n\n\nexport const wsReducer = (state = initialState, action: TWSActions):TWSState  => {\n    switch (action.type) {\n        case WS_CONNECTION_START: {\n            return {\n                ...state,\n            };\n        }\n        case WS_CONNECTION_SUCCESS: {\n            return {\n                ...state,\n                wsConnected: true,\n            };\n        }\n        case WS_CONNECTION_ERROR: {\n            return {\n                ...state,\n                wsConnected: false,\n                error: action.event\n            };\n        }\n        case WS_GET_MESSAGE: {\n            return {\n                ...state,\n                body: action.data,\n                cntAll: action.cntAll,\n                cntToday: action.cntToday,\n            };\n        }\n        case WS_CONNECTION_CLOSED: {\n            return {\n                ...state,\n                wsConnected: false,\n            };\n        }\n        default:\n            return state;\n    }\n}","import { combineReducers } from 'redux';\nimport {burgerReducer as burger} from \"./burger\";\nimport {ingredientsReducer as ingredients} from \"./ingredients\";\nimport {orderReducer as order} from \"./order\";\nimport {viewIngredientReducer as viewIngredient} from \"./view-ingredient\";\nimport {wsReducer as ws} from \"./ws\";\n\nexport const rootReducer = combineReducers({\n    burger,\n    ingredients,\n    order,\n    viewIngredient,\n    ws,\n})","import {applyMiddleware, compose, createStore} from \"redux\";\nimport thunk from \"redux-thunk\";\nimport {rootReducer} from \"./reducers\";\nimport {socketMiddleware} from \"./socketMiddleware\";\n\ndeclare global {\n    interface Window {\n        __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\n    }\n}\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst enhancer = composeEnhancers(applyMiddleware(thunk, socketMiddleware()));\n\nexport const store = createStore(rootReducer, enhancer);","import type {Middleware, MiddlewareAPI} from 'redux';\n\nimport type {AppDispatch, RootState} from '../utils/types';\nimport {\n    WS_CONNECTION_START, WS_CONNECTION_STOP,\n} from \"./constants/ws\";\nimport {WsConnectionClose, WsConnectionError, WsConnectionSuccess, WsGetMessage} from \"./actions/ws\";\n\nexport const socketMiddleware = (): Middleware => {\n    return ((store: MiddlewareAPI<AppDispatch, RootState>) => {\n        let socket: WebSocket | null = null;\n\n        return next => (action) => {\n            const { dispatch } = store;\n\n            if (action.type === WS_CONNECTION_START) {\n                socket = new WebSocket(action.url);\n            }\n\n            if (action.type === WS_CONNECTION_STOP) {\n                socket?.close()\n            }\n            if (socket) {\n                socket.onopen = event => {\n                    dispatch(WsConnectionSuccess(event));\n                };\n                socket.onerror = event => {\n                    dispatch(WsConnectionError(event));\n                };\n                socket.onmessage = event => {\n                    const { data } = event;\n                    const par = JSON.parse(data)\n                    dispatch(WsGetMessage(par.orders, par.totalToday, par.total));\n                };\n                socket.onclose = (event) => {\n                    dispatch(WsConnectionClose(event));\n                };\n            }\n            next(action);\n        };\n    }) as Middleware;\n};","import React from 'react';\nimport ReactDOM from \"react-dom\";\nimport './index.css';\nimport App from './components/app/app';\nimport reportWebVitals from './reportWebVitals';\n\n\nimport {BrowserRouter as Router} from 'react-router-dom';\n\nimport {Provider} from \"react-redux\";\n\nimport {store} from \"./services/store\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <Router>\n                <App/>\n            </Router>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"burger-ingredients_content__1rMpp\",\"tab\":\"burger-ingredients_tab__1Ru1Z mb-10\",\"list_wrap\":\"burger-ingredients_list_wrap__tSwBa ml-4 pr-4\",\"list\":\"burger-ingredients_list__HZyi9\",\"item\":\"burger-ingredients_item__3x5fV\",\"item_image\":\"burger-ingredients_item_image__2NGHO mb-1\",\"item_price\":\"burger-ingredients_item_price__kZIhd mb-1 text text_type_digits-default\",\"item_name\":\"burger-ingredients_item_name__21F2n text text_type_main-default\",\"link\":\"burger-ingredients_link__2-zFo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"feed_main__3gURw\",\"container\":\"feed_container__3Zlhe\",\"grid_stats\":\"feed_grid_stats__3YeSe\",\"content\":\"feed_content__9ySNd\",\"list_wrap\":\"feed_list_wrap__e38Dd pr-4\",\"info_order\":\"feed_info_order__U4vI4\",\"link\":\"feed_link__YpvGa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"order-small_item__3EThH\",\"info\":\"order-small_info__3q1V4\",\"info_price\":\"order-small_info_price__1cgSW\",\"right\":\"order-small_right__ynDfq\",\"img_preview\":\"order-small_img_preview__WegTW\",\"list_ingr\":\"order-small_list_ingr__387mp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"order-detail_content__3ISf4 mt-30 mb-30\",\"order_num\":\"order-detail_order_num__19o6S text text_type_digits-large\",\"order_num_description\":\"order-detail_order_num_description__2qHDg pt-8 text text_type_main-medium\",\"order_status_icon\":\"order-detail_order_status_icon__BeiYx mt-10 mb-10\",\"order_status\":\"order-detail_order_status__1VDAt text text_type_main-default\",\"order_status_description\":\"order-detail_order_status_description__kuSgf pt-2 text text_type_main-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"register_content__3FBxM\",\"title\":\"register_title__1YKBQ text text_type_main-medium\",\"field\":\"register_field__qkDiu\",\"link\":\"register_link__2XLtm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"img_preview\":\"order-info_img_preview__2k8GE\",\"item\":\"order-info_item__AxHy8\",\"item_info\":\"order-info_item_info__2hpel\",\"footer\":\"order-info_footer__2VeuG\",\"list_items\":\"order-info_list_items__2ES_1 pr-4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"forgot-password_content__dCYfM\",\"title\":\"forgot-password_title__2-1yB text text_type_main-medium\",\"field\":\"forgot-password_field__1uXdg\",\"link\":\"forgot-password_link__1xRFL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__1DF1f\",\"content\":\"modal_content__1tQ-X\",\"close\":\"modal_close__1Iez6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"index_main__2LwEl\",\"container\":\"index_container__6w4GD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"profile_main__qGy5r\",\"container\":\"profile_container__2BbXp\",\"menu\":\"profile_menu__xxfx5\",\"content\":\"profile_content__3vLfG p-3\",\"link\":\"profile_link__1-1p8 text text_type_main-medium pt-5 pb-5\",\"active\":\"profile_active__187xt\",\"field\":\"profile_field__yCAuS\",\"list_wrap\":\"profile_list_wrap__bsY1d pr-4\",\"link_clear\":\"profile_link_clear__3ckuA\",\"info_order\":\"profile_info_order__PT0L3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_overlay\":\"modal-overlay_modal_overlay__1H0v3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"center\":\"ingredients_center__1YsyZ\"};"],"sourceRoot":""}